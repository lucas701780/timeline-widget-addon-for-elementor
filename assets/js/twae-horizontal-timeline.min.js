class HorizontalSliderClass extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{swiperContainer:".twae-slider-container.swiper-container",thumbnailSwiperContainer:".year-swiper-container.swiper-container",nextButton:".twae-button-next",prevButton:".twae-button-prev",prevNav:".twae-nav-prev",nextNav:".twae-nav-next",paginationEl:".twae-line-fill",hrNavigationBar:".twae-horizontal-navigationBar"}}}getDefaultElements(){const selectors=this.getSettings("selectors");return{$swiperContainer:this.$element.find(selectors.swiperContainer),$thumbnailSwiperContainer:this.$element.find(selectors.thumbnailSwiperContainer),$nextButton:this.$element.find(selectors.nextButton),$prevButton:this.$element.find(selectors.prevButton),$prevNav:this.$element.find(selectors.prevNav),$nextNav:this.$element.find(selectors.nextNav),$paginationEl:this.$element.find(selectors.paginationEl),$hrNavigationBar:this.$element.find(selectors.hrNavigationBar)}}bindEvents(){const selector=this.elements.$swiperContainer,thumbnailSwiperContainer=this.elements.$thumbnailSwiperContainer;this.attr={selector:selector,thumbnailSwiperContainer:thumbnailSwiperContainer,slidestoshow:selector.data("slidestoshow"),autoplay:selector.data("autoplay"),speed:selector.data("speed"),infiniteLoop:selector.data("infinite-loop"),ajaxLoadMore:selector.data("ajax-pagination"),lineFilling:selector.data("lineFilling"),nextBtn:this.elements.$nextButton[0],prevBtn:this.elements.$prevButton[0],preNavBtn:this.elements.$prevNav[0],nextNavBtn:this.elements.$nextNav[0],ajaxProcessing:!1,yearHtLabel:thumbnailSwiperContainer.length,hrNavigationBar:this.elements.$hrNavigationBar,langDir:selector.data("dir"),mainSwiperObj:{},navSwiperObj:{},thumSwiperObj:{}},this.mainSwiper(selector),this.attr.yearHtLabel&&this.thumbnailSwiper(thumbnailSwiperContainer)}async mainSwiper(selector){this.slideChangeComplete=!1;const autoHeight=selector.data("autoHeight"),spacebw=this.attr.selector.data("spacebw"),paginationEl=this.elements.$paginationEl,yearHtLabel=this.attr.yearHtLabel;let slidestoshow=this.attr.slidestoshow,autoplay=this.attr.autoplay,navigation={},loopedSlides,pagination=!1;this.attr.lineFilling&&(pagination={el:paginationEl[0],type:"progressbar"}),navigation="rtl"==this.attr.langDir?{nextEl:this.attr.prevBtn,prevEl:this.attr.nextBtn}:{nextEl:this.attr.nextBtn,prevEl:this.attr.prevBtn},yearHtLabel&&(loopedSlides=slidestoshow,slidestoshow=1,navigation="",autoplay=!1);let respsSlidesperview=1;if(slidestoshow>2&&(respsSlidesperview=2),this.attr.mainSwiperObj=await this.swipperGlobalCheck(selector,{autoHeight:!!autoHeight,spaceBetween:spacebw,autoplay:autoplay,delay:3e3,loop:this.attr.infiniteLoop,speed:this.attr.speed,slidesPerView:slidestoshow,direction:"horizontal",pagination:pagination,navigation:navigation,loopedSlides:loopedSlides,slidesPerGroup:1,disableOnInteraction:!0,breakpoints:{280:{slidesPerView:1,loopedSlides:2},768:{slidesPerView:respsSlidesperview,loopedSlides:3},1024:{slidesPerView:slidestoshow,loopedSlides:loopedSlides}},on:{slideChange:e=>{if("yes"===this.attr.ajaxLoadMore){let args=e,sliderEl=args.$el.attr("id"),El=jQuery("#"+sliderEl);this.attr.ajaxProcessing||yearHtLabel||!args.isEnd||!1!==El.hasClass("twae-loadMore-complete")||this.ajaxLoadMoreRequest()}if(this.attr.lineFilling){let scrollFilling;this.slideChangeComplete=!1,scrollFilling=setInterval(()=>{this.twaeScrollFilling(),this.slideChangeComplete&&clearInterval(scrollFilling)},250)}},slideChangeTransitionEnd:()=>{this.slideChangeComplete=!0}}}),this.attr.lineFilling){let debounceTimeout;this.twaeScrollFilling(),jQuery(window).on("resize",_=>{clearTimeout(debounceTimeout),debounceTimeout=setTimeout(()=>{this.twaeScrollFilling()},200)})}this.attr.hrNavigationBar.length>0&&this.navBarHtml(),this.attr.infiniteLoop&&elementorFrontend.hooks.doAction("frontend/twaeWidget/horizontalSliderInitialize","custom hook")}async thumbnailSwiper(selector){let navigation={};navigation="rtl"==this.attr.langDir?{nextEl:this.attr.prevBtn,prevEl:this.attr.nextBtn}:{nextEl:this.attr.nextBtn,prevEl:this.attr.prevBtn},this.attr.thumSwiperObj=await this.swipperGlobalCheck(selector,{spaceBetween:0,slidesPerView:this.attr.slidestoshow,autoplay:this.attr.autoplay,delay:3e3,speed:this.attr.speed,loop:this.attr.infiniteLoop,navigation:navigation,slideToClickedSlide:!0,centeredSlides:!0,roundLengths:!0,slidesPerGroup:1,disableOnInteraction:!0,breakpoints:{280:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:this.attr.slidestoshow}},on:{slideChange:e=>{if("yes"==this.attr.ajaxLoadMore){const activeIndex=e.activeIndex,slidesPerView=e.params.slidesPerView,totalSlides=e.slides.length,remaingSlide=Math.ceil(slidesPerView/2);let activeSlide=activeIndex+remaingSlide;!this.attr.ajaxProcessing&&activeSlide===totalSlides&&this.attr,!1===selector.hasClass("twae-loadMore-complete")&&this.ajaxLoadMoreRequest()}}}})}async navSwiper(selector){let navigation={};navigation="rtl"==this.attr.langDir?{nextEl:this.attr.preNavBtn,prevEl:this.attr.nextNavBtn}:{nextEl:this.attr.nextNavBtn,prevEl:this.attr.preNavBtn};let navPerView=10;this.attr.navSwiperObj=await this.swipperGlobalCheck(selector,{slidesPerView:10,clickable:!0,allowTouchMove:!1,slideToClickedSlide:!0,spaceBetween:20,breakpoints:{280:{slidesPerView:2},576:{slidesPerView:3},768:{slidesPerView:5},1024:{slidesPerView:10}},navigation:navigation})}navBarHtml(){var navPostId=this.attr.hrNavigationBar.attr("id");navPostId=navPostId.replace("twae-horizontal-navigationBar-","");let navigatorYear=this.attr.selector.find(".twae-year");const timelineStories=this.attr.selector.find(".twae-story.swiper-slide"),updateDuplicateIndex=()=>{for(var i=0;i<timelineStories.length;i++)timelineStories[i].setAttribute("data-index",i)},navListItems=()=>{let hrlistAll=document.createElement("div");hrlistAll.classList.add("twae-horizontal-navigation-items","swiper-wrapper");const activeSlide=this.attr.selector[0].swiper.activeIndex;let hrlistEl="";this.attr.hrNavigationBar[0].appendChild(hrlistAll);const indexCache=new Array;for(var i=0;i<navigatorYear.length;i++){indexCache.push(i);let uniqueID,HrscrollbarID="twae-horizontal-unique-"+(navPostId+"-item-"+i);navigatorYear[i].setAttribute("id",HrscrollbarID);let labelClassHr=jQuery("#"+HrscrollbarID).find(".twae-year-text");hrlistEl=document.createElement("div"),activeSlide===i&&hrlistEl.classList.add("active"),hrlistEl.classList.add("swiper-slide"),hrlistEl.classList.add("twae-year-nav"),hrlistEl.setAttribute("data-id",HrscrollbarID),hrlistEl.setAttribute("data-index",i),hrlistEl.innerText=labelClassHr.text(),hrlistAll.appendChild(hrlistEl)}};updateDuplicateIndex(),navListItems(),this.navSwiper(this.attr.hrNavigationBar)}swiperYearNavController(element){const navPostIdAttr=element.attr("id"),navPostId=navPostIdAttr.replace("twae-horizontal-navigationBar-",""),mainSwiper=jQuery(`#twae-wrapper-${navPostId}`).find(".twae-slider-container")[0],yearSwiper=element[0],swiperIndexUpdate=(id,type)=>{if(void 0!==id){const mainSwiperIndex=jQuery(mainSwiper).find(`.twae-year#${id}`).closest(".twae-story.swiper-slide").data("index");"mainSwiper"!==type&&mainSwiper.swiper.slideTo(mainSwiperIndex),jQuery(yearSwiper).find(".swiper-slide").removeClass("active");const activeNav=jQuery(yearSwiper).find(`.swiper-slide[data-id="${id}"]`);activeNav.addClass("active");const navActiveIndex=activeNav.data("index");yearSwiper.swiper.slideTo(navActiveIndex)}};yearSwiper.swiper.on("click",e=>{const targetElement=e.clickedSlide?e.clickedSlide:e.target,id=jQuery(targetElement).data("id");swiperIndexUpdate(id,"yearSwiper")}),mainSwiper.swiper.on("slideChange",()=>{const activeIndex=mainSwiper.swiper.activeIndex,activeSlide=mainSwiper.swiper.slides[activeIndex],id=jQuery(activeSlide).find(".twae-year").attr("id");swiperIndexUpdate(id,"mainSwiper")});const updateNavbtnCls=()=>{const screenSize=window.innerWidth,navList=jQuery(yearSwiper).find(".swiper-slide").length;let navHidden=!0;navHidden=!(screenSize>1024&&navList>10)&&(!(screenSize>768&&screenSize<1024&&navList>5)&&(!(screenSize>576&&screenSize<768&&navList>3)&&!(screenSize<575&&navList>2)));const nav=jQuery(yearSwiper).closest(".twae-hor-nav-wrapper").find(".twae-nav-next, .twae-nav-prev");navHidden?nav.hide():nav.show()};jQuery(window).on("resize",updateNavbtnCls),updateNavbtnCls()}twaeScrollFilling(){const paginationObj=this.attr.selector[0].swiper.pagination;if(paginationObj){let paginationWrp=paginationObj.el;if(paginationWrp){paginationWrp=jQuery(paginationWrp);const sliderLeftPostion=this.attr.selector[0].getBoundingClientRect().left-this.attr.selector[0].offsetLeft,pagination=paginationWrp.find("span.swiper-pagination-progressbar-fill"),paginationTransformStyle=pagination[0].style.transform,progressValue=paginationTransformStyle.match(/scaleX\(([^)]+)\)/)[1],paginationWidth=Math.round(pagination[0].offsetWidth*progressValue);if(this.attr.selector.closest(".twae-wrapper").hasClass("twae-horizontal-highlighted-timeline")){const icons=this.attr.thumbnailSwiperContainer.find(".swiper-slide .twae-icon,.swiper-slide .twae-icondot");icons.each((_,icon)=>{const iconLeftPosition=icon.getBoundingClientRect().left,iconCurrentPosition=iconLeftPosition-sliderLeftPostion;paginationWidth>iconCurrentPosition?jQuery(icon).closest(".swiper-slide").addClass("twae-in-view-port"):jQuery(icon).closest(".swiper-slide").removeClass("twae-in-view-port")})}else{const slides=this.attr.selector.find(".twae-story.swiper-slide");slides.each((index,slide)=>{const icons=jQuery(slide).find(".twae-icon,.twae-icondot"),yearLabel=jQuery(slide).find(".twae-year");if(icons.length>0){const iconLeftPosition=icons[0].getBoundingClientRect().left,storyPosition=iconLeftPosition-sliderLeftPostion;paginationWidth>=storyPosition?jQuery(slide).addClass("twae-in-view-port"):jQuery(slide).removeClass("twae-in-view-port")}if(yearLabel.length>0){const yearLeftPosition=yearLabel[0].getBoundingClientRect().left,yearPosition=yearLeftPosition-sliderLeftPostion;paginationWidth>=yearPosition?jQuery(yearLabel).addClass("twae-in-view-port"):jQuery(yearLabel).removeClass("twae-in-view-port")}})}}}}ajaxLoadMoreRequest(attr){const clickedLoadMore=new Event("clickedLoadMore"),mainSwiperWrp=this.attr.selector,Widget_id=mainSwiperWrp[0].id.replace("twae-",""),postWindowObject=window["post_timeline_"+Widget_id];var allAtts=postWindowObject.attribute;let ajaxUrl=postWindowObject.url,wpNonce=postWindowObject.private_key,pageNo=parseInt(mainSwiperWrp[0].getAttribute("data-page-no")),totalPage=parseInt(mainSwiperWrp.data("total-pages"));pageNo!==totalPage?jQuery.ajax({type:"POST",dataType:"json",url:ajaxUrl,data:{action:"twae_post_load_more",private_key:wpNonce,page_no:pageNo,settings:allAtts},beforeSend:()=>{this.attr.ajaxProcessing=!0,jQuery(this.attr.nextBtn).addClass("swiper-button-disabled"),jQuery(this.attr.nextBtn).find(".lm_active_state").show()}}).done(res=>{this.attr.yearHtLabel&&(this.attr.thumbnailSwiperContainer[0].swiper.appendSlide(res.highlightedcontent),this.attr.thumbnailSwiperContainer[0].swiper.update(!0)),this.attr.selector[0].swiper.appendSlide(res.html),this.attr.selector[0].swiper.update(!0),jQuery(this.attr.nextBtn).find(".lm_active_state").hide();let thisPage=pageNo+1;this.attr.selector.attr("data-page-no",thisPage),document.dispatchEvent(clickedLoadMore),thisPage===totalPage&&this.attr.selector.addClass("twae-loadMore-complete")}).always(res=>{jQuery(this.attr.nextBtn).removeClass("swiper-button-disabled"),this.attr.ajaxProcessing=!1}):this.attr.selector.addClass("twae-loadMore-complete")}async swipperGlobalCheck(swiperElement,swiperConfig){const autoplayStopOnhover=this.attr.selector.data("stop-autoplay-onhover"),swiperHoverEffect=element=>{const mainSwiper=element[0].swiper;jQuery(element).mouseenter((function(){mainSwiper.autoplay.stop()})),jQuery(element).mouseleave((function(){mainSwiper.autoplay.start()}))},swiperThumbController=element=>{const yearSwiper=element[0],mainSwiper=element.closest(".twae-wrapper-inside").find(".twae-slider-container")[0];yearSwiper.swiper.controller.control=mainSwiper.swiper,mainSwiper.swiper.controller.control=yearSwiper.swiper};if(swiperElement.length){if("undefined"==typeof Swiper){const asyncSwiper=elementorFrontend.utils.swiper;return new Promise((resolve,reject)=>{new asyncSwiper(swiperElement,swiperConfig).then(newSwiperInstance=>{autoplayStopOnhover&&(!this.attr.yearHtLabel&&swiperElement.hasClass("twae-slider-container")?swiperHoverEffect(swiperElement):swiperElement.hasClass("year-swiper-container")&&swiperHoverEffect(swiperElement)),this.attr.yearHtLabel&&swiperElement.hasClass("year-swiper-container")&&swiperThumbController(swiperElement),this.attr.hrNavigationBar.length&&swiperElement.hasClass("twae-horizontal-navigationBar")&&this.swiperYearNavController(swiperElement),resolve(newSwiperInstance)}).catch(error=>{reject(error)})})}{const swiper=new Swiper(swiperElement[0],swiperConfig);return autoplayStopOnhover&&(!this.attr.yearHtLabel&&swiperElement.hasClass("twae-slider-container")?swiperHoverEffect(swiperElement):swiperElement.hasClass("year-swiper-container")&&swiperHoverEffect(swiperElement)),this.attr.yearHtLabel&&swiperElement.hasClass("year-swiper-container")&&swiperThumbController(swiperElement),this.attr.hrNavigationBar.length&&swiperElement.hasClass("twae-horizontal-navigationBar")&&this.swiperYearNavController(swiperElement),swiper}}}}jQuery(window).on("elementor/frontend/init",()=>{const addHandler=$element=>{elementorFrontend.elementsHandler.addHandler(HorizontalSliderClass,{$element:$element})};elementorFrontend.hooks.addAction("frontend/element_ready/timeline-widget-addon.default",addHandler),elementorFrontend.hooks.addAction("frontend/element_ready/twae-post-timeline-widget.default",addHandler)});