class TWAE_year_navigation extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{wrapper:".twae-vertical",navigationBar:".twae-navigationBar"}}}getDefaultElements(){const selectors=this.getSettings("selectors");return{$wrapper:this.$element.find(selectors.wrapper),$navigationBar:this.$element.find(selectors.navigationBar)}}bindEvents(){var selector=this.elements.$wrapper,timelineEntry=selector.find(".twae-repeater-item"),last_story=jQuery(timelineEntry[timelineEntry.length-1]),navigationBar=this.elements.$navigationBar;if(navigationBar.length>0){navigationBar.addClass("twae-out-viewport");var postID=navigationBar.attr("id");postID=postID.replace("twae-navigationBar-","");let navigator=selector.find(" .twae-year-container"),listAll=document.createElement("ul");listAll.classList.add("twae-navigation-items");let listEl="";$=jQuery,navigationBar[0].appendChild(listAll);for(var i=0;i<navigator.length;i++){let uniqueID,scrollbarID="twae-scrollar-"+(postID+"-item-"+i);navigator[i].setAttribute("id",scrollbarID);let labelClass=$("#"+scrollbarID).find(".twae-year-label");listEl=document.createElement("li");let anchorEl=document.createElement("a");0==i&&(anchorEl.classList.add("current"),listEl.classList.add("current")),anchorEl.setAttribute("href","#"+scrollbarID),anchorEl.innerText=labelClass.text(),listEl.appendChild(anchorEl),listAll.appendChild(listEl)}let mainNavLinks=navigationBar.find("ul li a"),previousEl=null;window.addEventListener("scroll",()=>{var rootElement=document.documentElement,viewport=jQuery(window).height()/3,timelineWrapper_position=jQuery(selector).offset().top;if(last_story.length>0){var timelineBottom=last_story.offset().top+last_story.height()-rootElement.scrollTop,timeline_top;timelineWrapper_position-rootElement.scrollTop<viewport?(navigationBar.removeClass("twae-out-viewport"),navigationBar.addClass("twae-in-viewport")):(navigationBar.removeClass("twae-in-viewport"),navigationBar.addClass("twae-out-viewport")),timelineBottom<viewport&&(navigationBar.removeClass("twae-in-viewport"),navigationBar.addClass("twae-out-viewport"));let extraspace=400,fromTop=window.scrollY+extraspace;for(var i=0;i<mainNavLinks.length;i++){if(0==$(mainNavLinks[i].hash).length)return!1;let section=$(mainNavLinks[i].hash).offset().top;section<=fromTop&&(null!=previousEl&&(previousEl.classList.remove("current"),previousEl.parentElement.classList.remove("current")),mainNavLinks[i].classList.add("current"),mainNavLinks[i].parentElement.classList.add("current")),section>=fromTop&&(mainNavLinks[i].classList.remove("current"),mainNavLinks[i].parentElement.classList.remove("current")),previousEl=mainNavLinks[i]}}}),$(navigationBar[0]).find(".twae-nav-icon").on("click",(function(e){e.preventDefault(),$(this).parents().find(".twae-navigation-items").animate({width:"toggle"})}))}}}jQuery(window).on("elementor/frontend/init",()=>{const addHandler=$element=>{elementorFrontend.elementsHandler.addHandler(TWAE_year_navigation,{$element:$element})};elementorFrontend.hooks.addAction("frontend/element_ready/timeline-widget-addon.default",addHandler),elementorFrontend.hooks.addAction("frontend/element_ready/twae-post-timeline-widget.default",addHandler)});